{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J2MXTGJ8DT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-J2MXTGJ8DT');
</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
  <link rel="stylesheet" href="{% static 'css/search.css' %}">
  <link rel="stylesheet" href="{% static 'css/pagination.css' %}">
  <link rel="stylesheet" href="{% static 'css/cart.css' %}">
  {% block extra_css %}{% endblock extra_css %}

  <link rel="shortcut icon" href="{% static 'icons/favicon.png' %}" type="image/x-icon">
  <link rel="manifest" href="{% static 'manifest.json' %}">
  <meta name="theme-color" content="#6366f1">
  <title>Bellafly</title>
</head>
<body>

  <header>
    <div class="header-container">
      
      <!-- LOGO -->
      <div class="logo">
        ğŸ¦‹ Bellafly
      </div>

      <button class="mobile-menu-btn icon-btn" onclick="toggleMobileMenu()">
        â˜°
      </button>

      <!-- NAVEGAÃ‡ÃƒO PRINCIPAL -->
      <nav class="nav">
        <a href="?categoria=perfumaria" class="nav-link">Perfumaria</a>
        <a href="?categoria=roupas" class="nav-link">Roupas</a>
        <a href="?categoria=acessorios" class="nav-link">AcessÃ³rios</a>
        <a href="?categoria=kits" class="nav-link">Kits</a>
        <a href="?categoria=diversos" class="nav-link">diversos</a>
      </nav>

      <!-- ÃCONES -->
      <div class="nav-icons">
      <!-- BUSCA -->
      <form method="get" action="{% url 'blog:product_search' %}" style="display:flex; gap:0.5rem;">
        <input type="text" 
              name="q" 
              placeholder="Buscar..." 
              value="{{ query|default_if_none:'' }}"
              style="padding:0.5rem 0.8rem; border:1px solid var(--border); border-radius:6px;">
        
        {% if categoria %}
          <input type="hidden" name="categoria" value="{{ categoria }}">
        {% endif %}

        <button class="icon-btn" type="submit">ğŸ”</button>
      </form>
        

        <!-- CARRINHO -->
        <button class="icon-btn" onclick="toggleCart()">
          ğŸ›’
          <span class="cart-badge" id="cart-count">0</span>
        </button>

      </div>

    </div>
  </header>

 
  
  <!-- INFO DA PAGINAÃ‡ÃƒO -->
  {% if produtos.object_list %}
  <div class="pagination-info">
    <p>Mostrando {{ produtos.start_index }}-{{ produtos.end_index }} de {{ produtos.paginator.count }} produtos</p>
  </div>
  {% endif %}
  
  <main>
    {% block content %}  {% endblock content %}
  </main>

  <!-- PAGINAÃ‡ÃƒO -->
  {% if produtos.paginator.num_pages > 1 %}
  <div class="pagination-container">
    <div class="pagination">
      

      <!-- Primeira pÃ¡gina -->
      {% if produtos.has_previous %}
        <a href="?{% if query %}q={{ query }}&{% endif %}{% if categoria %}categoria={{ categoria }}&{% endif %}page=1" class="page-btn first">
          â† Primeira
        </a>
        <a href="?{% if query %}q={{ query }}&{% endif %}{% if categoria %}categoria={{ categoria }}&{% endif %}page={{ produtos.previous_page_number }}" class="page-btn prev">
          â† Anterior
        </a>
      {% endif %}

      <!-- NÃºmeros das pÃ¡ginas -->
      {% for page in page_range %}
        {% if page == '...' %}
          <span class="page-dots">...</span>
        {% elif page == current_page %}
          <span class="page-btn current">{{ page }}</span>
        {% else %}
          <a href="?{% if query %}q={{ query }}&{% endif %}{% if categoria %}categoria={{ categoria }}&{% endif %}page={{ page }}" class="page-btn">
            {{ page }}
          </a>
        {% endif %}
      {% endfor %}

      <!-- PrÃ³xima pÃ¡gina -->
      {% if produtos.has_next %}
        <a href="?{% if query %}q={{ query }}&{% endif %}{% if categoria %}categoria={{ categoria }}&{% endif %}page={{ produtos.next_page_number }}" class="page-btn next">
          PrÃ³xima â†’
        </a>
        <a href="?{% if query %}q={{ query }}&{% endif %}{% if categoria %}categoria={{ categoria }}&{% endif %}page={{ produtos.paginator.num_pages }}" class="page-btn last">
          Ãšltima â† 
        </a>
      {% endif %}

    </div>
    
    <!-- Info adicional -->
    <div class="pagination-summary">
      PÃ¡gina {{ produtos.number }} de {{ produtos.paginator.num_pages }}
    </div>
    
  </div>
  {% endif %}

  <!-- BotÃ£o flutuante do carrinho -->
  <div id="cart-icon" onclick="toggleCart()">
    ğŸ›’
  </div> 

  <!-- Sidebar do carrinho -->
  <div id="cart-sidebar">
    <h2 style="margin-bottom:1.5rem;">ğŸ›ï¸ Carrinho</h2>
    <div id="cart-items"></div>
    <div id="cart-total"></div>
   
    <button class="add-to-cart" onclick="sendCartToWhatsApp()">ğŸ’¬ Enviar Pedido</button>
    
    <button class="add-to-cart" onclick="clearCart()">ğŸ—‘ï¸ Limpar</button>
  </div>

  <div id="cart-overlay" onclick="toggleCart()"></div>


      <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Bellafly</h3>
                <p style="font-size: 0.9rem; margin-bottom: 1.5rem; opacity: 0.8;">
                    A essÃªncia da beleza premium ao seu alcance.
                </p>
            </div>
            <div class="footer-section">
                <h3>Categorias</h3>
                <a href="#" class="footer-link">Perfumaria</a>
                <a href="#" class="footer-link">Skincare</a>
                <a href="#" class="footer-link">Maquiagem</a>
                <a href="#" class="footer-link">Tratamentos</a>
            </div>
            <div class="footer-section">
                <h3>Suporte</h3>
                <a href="#" class="footer-link">Fale Conosco</a>
                <a href="#" class="footer-link">DÃºvidas Frequentes</a>
                <a href="#" class="footer-link">Envios e DevoluÃ§Ãµes</a>
                <a href="#" class="footer-link">PolÃ­tica de Privacidade</a>
                <a href="{% url 'admin:index' %}" class="footer-link">Login Admin</a>
            </div>
            <div class="footer-section">
                <h3>Redes Sociais</h3>
                <a href="#" class="footer-link">Instagram</a>
                <a href="#" class="footer-link">Facebook</a>
                <a href="#" class="footer-link">TikTok</a>
                <a href="#" class="footer-link">Pinterest</a>
            </div>
        </div>
        <div class="footer-divider">
            <p>&copy; 2024 Bellafly Premium. Todos os direitos reservados.</p>
        </div>
    </footer>

  <script src="{% static 'js/scripts.js'%}"></script>
  <script src="{% static 'js/mobile.js'%}"></script>
  <script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/service-worker.js");
  }
  </script>

</body>
</html>