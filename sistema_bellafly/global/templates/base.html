{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J2MXTGJ8DT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-J2MXTGJ8DT');
</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="shortcut icon" href="{% static 'icons/favicon.png' %}" type="image/x-icon">
  <link rel="manifest" href="{% static 'manifest.json' %}">
  <meta name="theme-color" content="#ec4899">
  <title>Bellafly</title>
</head>
<body>
  <header>
    <h1>ğŸ¦‹ Bellafly ğŸ¦‹</h1>
    <form method="get">
      <input type="text" name="q" placeholder="Buscar em todos os produtos..." value="{{ query|default_if_none:'' }}">
      <button type="submit">ğŸ” Pesquisar</button>
      {% if categoria %}
        <input type="hidden" name="categoria" value="{{ categoria }}">
      {% endif %}
    </form>
  </header>

  <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
  
  <div class="overlay" id="overlay" onclick="closeMenu()"></div>

  <nav id="menu" class="sidebar">
    <div class="sidebar-title">Categorias</div>
    <a class="btn {% if categoria == 'perfumaria' %}active{% endif %}" href="?categoria=perfumaria" data-category="perfumaria">
      <span>âœ¨ Perfumaria</span>
    </a>
    <a class="btn {% if categoria == 'roupas' %}active{% endif %}" href="?categoria=roupas" data-category="roupas">
      <span>ğŸ‘— Roupas</span>
    </a>
    <a class="btn {% if categoria == 'acessorios' %}active{% endif %}" href="?categoria=acessorios" data-category="acessorio">
      <span>ğŸ’ AcessÃ³rios</span>
    </a>
    <a class="btn {% if categoria == 'kits' %}active{% endif %}" href="?categoria=kits" data-category="kits">
      <span>ğŸ’„ Kits de Beleza</span>
    </a>
    <a class="btn {% if categoria == 'diversos' %}active{% endif %}" href="?categoria=diversos" data-category="diversos">
      <span>ğŸ›ï¸ diversos</span>
    </a>
  </nav>
  
  <!-- INFO DA PAGINAÃ‡ÃƒO -->
  {% if produtos.object_list %}
  <div class="pagination-info">
    <p>Mostrando {{ produtos.start_index }}-{{ produtos.end_index }} de {{ produtos.paginator.count }} produtos</p>
  </div>
  {% endif %}
  
  {% block content %}
  
  {% endblock content %}


  <!-- PAGINAÃ‡ÃƒO -->
  {% if produtos.paginator.num_pages > 1 %}
  <div class="pagination-container">
    <div class="pagination">
      

      <!-- Primeira pÃ¡gina -->
      {% if produtos.has_previous %}
        <a href="?{% if query %}q={{ query }}&{% endif %}{% if categoria %}categoria={{ categoria }}&{% endif %}page=1" class="page-btn first">
          â† Primeira
        </a>
        <a href="?{% if query %}q={{ query }}&{% endif %}{% if categoria %}categoria={{ categoria }}&{% endif %}page={{ produtos.previous_page_number }}" class="page-btn prev">
          â† Anterior
        </a>
      {% endif %}

      <!-- NÃºmeros das pÃ¡ginas -->
      {% for page in page_range %}
        {% if page == '...' %}
          <span class="page-dots">...</span>
        {% elif page == current_page %}
          <span class="page-btn current">{{ page }}</span>
        {% else %}
          <a href="?{% if query %}q={{ query }}&{% endif %}{% if categoria %}categoria={{ categoria }}&{% endif %}page={{ page }}" class="page-btn">
            {{ page }}
          </a>
        {% endif %}
      {% endfor %}

      <!-- PrÃ³xima pÃ¡gina -->
      {% if produtos.has_next %}
        <a href="?{% if query %}q={{ query }}&{% endif %}{% if categoria %}categoria={{ categoria }}&{% endif %}page={{ produtos.next_page_number }}" class="page-btn next">
          PrÃ³xima â†’
        </a>
        <a href="?{% if query %}q={{ query }}&{% endif %}{% if categoria %}categoria={{ categoria }}&{% endif %}page={{ produtos.paginator.num_pages }}" class="page-btn last">
          Ãšltima â† 
        </a>
      {% endif %}

    </div>
    
    <!-- Info adicional -->
    <div class="pagination-summary">
      PÃ¡gina {{ produtos.number }} de {{ produtos.paginator.num_pages }}
    </div>
    
  </div>
  {% endif %}

  <!-- BotÃ£o flutuante do carrinho -->
  <div id="cart-icon" onclick="toggleCart()">
    ğŸ›’ <span id="cart-count">0</span>
  </div>

  <!-- Sidebar do carrinho -->
  <div id="cart-sidebar">
    <h2>ğŸ›ï¸ Carrinho</h2>
    <div id="cart-items"></div>
    <div id="cart-total"></div>
    <button class="btn" onclick="sendCartToWhatsApp()">ğŸ’¬ Enviar Pedido no WhatsApp</button>
    <p><br></p>
    <button class="btn" onclick="clearCart()">ğŸ—‘ï¸ Limpar Carrinho</button>
  </div>

  <div id="cart-overlay" onclick="toggleCart()"></div>

  <footer>
    <a class="btn" href="{% url 'admin:index' %}" target="_blank">ğŸ” Login Admin</a>
    <p>contato@omnisistems.com.br</p>
  </footer>

  <script src="{% static 'js/scripts.js'%}"></script>

  <script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/service-worker.js");
  }
  </script>

</body>
</html>